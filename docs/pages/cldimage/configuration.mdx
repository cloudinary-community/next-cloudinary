import Head from 'next/head';

import OgImage from '../../components/OgImage';
import Table from '../../components/Table';

<Head>
  <title>CldImage Configuration - Next Cloudinary</title>
  <meta name="og:title" content="CldImage Configuration - Next Cloudinary" />
  <meta name="og:url" content={`https://next.cloudinary.dev/cldimage/configuration`} />
</Head>

<OgImage
  title="CldImage Configuration"
  twitterTitle="CldImage Configuration"
/>

# CldImage Configuration

Configuration for CldImage is the same as [getCldImageUrl](/getcldimageurl/configuration), which both use the same underlying API.

## Props

The basic props required to use CldImage include:

<Table
  columns={[
    {
      id: 'prop',
      title: 'Prop'
    },
    {
      id: 'type',
      title: 'Type'
    },
    {
      id: 'required',
      title: 'Required'
    },
    {
      id: 'example',
      title: 'Example'
    },
  ]}
  data={[
    {
      prop: 'alt',
      type: 'string',
      required: 'Yes',
      example: "Dog catching a frisbee"
    },
    {
      prop: 'height',
      type: 'number/string',
      required: () => (<span>Yes, unless using <code>fill</code></span>),
      example: () => (<code>600</code>)
    },
    {
      prop: 'src',
      type: 'string',
      required: 'Yes',
      example: () => (<code>my-public-id</code>)
    },
    {
      prop: 'width',
      type: 'number/string',
      required: () => (<span>Yes, unless using <code>fill</code></span>),
      example: () => (<code>600</code>)
    },
  ]}
/>

CldImage extends the Next.js Image component using Cloudinary tech. This means all props
available on the Image component are available on CldImage.

Learn more on the [Next.js docs](https://nextjs.org/docs/pages/api-reference/components/image).

## Transformations & Effects

The CldImage component exposes many of Cloudinary's transformations in an easy-to-use way
right inside of Next.js.

### Transformations

<Table
  columns={[
    {
      id: 'prop',
      title: 'Prop'
    },
    {
      id: 'type',
      title: 'Type'
    },
    {
      id: 'default',
      title: 'Default'
    },
    {
      id: 'example',
      title: 'Example'
    },
  ]}
  data={[
    {
      prop: 'background',
      type: 'string',
      default: '-',
      example: () => (<code>blue</code>)
    },

    {
      prop: 'crop',
      type: 'string',
      default: () => (<code>limit</code>),
      example: () => (<code>thumb</code>)
    },
    {
      prop: 'fillBackground (Beta)',
      type: 'bool/object',
      default: '-',
      example: () => (<code>{`{{ gravity: 'east' }}`}</code>)
    },
    {
      prop: 'gravity',
      type: 'string',
      default: () => (<code>auto</code>),
      example: () => (<code>faces</code>)
    },
    {
      prop: 'removeBackground',
      type: 'bool/string',
      default: () => (<code>false</code>),
      example: () => (<code>true</code>)
    },
    {
      prop: 'replace',
      type: 'array/object',
      default: '-',
      example: () => (<code>{`['apple', 'banana']`}</code>)
    },
    {
      prop: 'zoom',
      type: 'string',
      default: '-',
      example: () => (<code>0.5</code>)
    },
    {
      prop: 'zoompan',
      type: 'bool/string/object',
      default: '-',
      example: () => (<code>true</code>)
    },
  ]}
/>

### Filters & Effects

<Table
  columns={[
    {
      id: 'prop',
      title: 'Prop'
    },
    {
      id: 'type',
      title: 'Type'
    },
    {
      id: 'default',
      title: 'Default'
    },
    {
      id: 'example',
      title: 'Example'
    },
  ]}
  data={[
    {
      prop: 'art',
      type: 'string',
      default: '-',
      example: () => (<code>al_dente</code>)
    },
    {
      prop: 'autoBrightness',
      type: 'bool/string',
      default: '-',
      example: () => (<span><code>true</code>, <code>80</code></span>)
    },
    {
      prop: 'autoColor',
      type: 'bool/string',
      default: '-',
      example: () => (<span><code>true</code>, <code>80</code></span>)
    },
    {
      prop: 'autoContrast',
      type: 'bool/string',
      default: '-',
      example: () => (<span><code>true</code>, <code>80</code></span>)
    },
    {
      prop: 'assistColorblind',
      type: 'bool/string',
      default: '-',
      example: () => (<span><code>true</code>, <code>20</code>, <code>xray</code></span>)
    },
    {
      prop: 'blackwhite',
      type: 'bool/string',
      default: '-',
      example: () => (<span><code>true</code>, <code>40</code></span>)
    },
    {
      prop: 'blur',
      type: 'bool/string',
      default: '-',
      example: () => (<span><code>true</code>, <code>800</code></span>)
    },
    {
      prop: 'blurFaces',
      type: 'bool/string',
      default: '-',
      example: () => (<span><code>true</code>, <code>800</code></span>)
    },
    {
      prop: 'blurRegion',
      type: 'bool/string',
      default: '-',
      example: () => (<span><code>true</code>, <code>1000,h_425,w_550,x_600,y_400</code></span>)
    },
    {
      prop: 'border',
      type: 'string',
      default: '-',
      example: () => (<code>5px_solid_purple</code>)
    },
    {
      prop: 'brightness',
      type: 'bool/string',
      default: '-',
      example: () => (<span><code>true</code>, <code>100</code></span>)
    },
    {
      prop: 'brightnessHSB',
      type: 'bool/string',
      default: '-',
      example: () => (<span><code>true</code>, <code>100</code></span>)
    },
    {
      prop: 'cartoonify',
      type: 'bool/string',
      default: '-',
      example: () => (<span><code>true</code>, <code>70:80</code></span>)
    },
    {
      prop: 'color',
      type: 'string',
      default: '-',
      example: () => (<code>blue</code>)
    },
    {
      prop: 'colorize',
      type: 'string',
      default: '-',
      example: () => (<code>35,co_darkviolet</code>)
    },
    {
      prop: 'contrast',
      type: 'bool/string',
      default: '-',
      example: () => (<span><code>true</code>, <code>100</code>, <code>level_-70</code></span>)
    },
    {
      prop: 'distort',
      type: 'string',
      default: '-',
      example: () => (<span><code>150:340:1500:10:1500:1550:50:1000</code>, <code>arc:180.0</code></span>)
    },
    {
      prop: 'fillLight',
      type: 'bool/string',
      default: '-',
      example: () => (<span><code>true</code>, <code>70:20</code></span>)
    },
    {
      prop: 'gamma',
      type: 'bool/string',
      default: '-',
      example: () => (<span><code>true</code>, <code>100</code></span>)
    },
    {
      prop: 'gradientFade',
      type: 'bool/string',
      default: '-',
      example: () => (<span><code>true</code>, <code>symmetric:10,x_0.2,y_0.4</code></span>)
    },
    {
      prop: 'grayscale',
      type: 'bool',
      default: '-',
      example: () => (<code>true</code>)
    },
    {
      prop: 'improve',
      type: 'bool/string',
      default: '-',
      example: () => (<span><code>true</code>, <code>50</code>, <code>indoor</code></span>)
    },
    {
      prop: 'multiply',
      type: 'bool',
      default: '-',
      example: () => (<code>true</code>)
    },
    {
      prop: 'negate',
      type: 'bool',
      default: '-',
      example: () => (<code>true</code>)
    },
    {
      prop: 'oilPaint',
      type: 'bool/string',
      default: '-',
      example: () => (<span><code>true</code>, <code>40</code></span>)
    },
    {
      prop: 'opacity',
      type: 'number/string',
      default: '-',
      example: () => (<code>40</code>)
    },
    {
      prop: 'outline',
      type: 'bool/string',
      default: '-',
      example: () => (<span><code>true</code>, <code>40</code>, <code>outer:15:200</code></span>)
    },
    {
      prop: 'pixelate',
      type: 'bool/string',
      default: '-',
      example: () => (<span><code>true</code>, <code>20</code></span>)
    },
    {
      prop: 'pixelateFaces',
      type: 'bool/string',
      default: '-',
      example: () => (<span><code>true</code>, <code>20</code></span>)
    },
    {
      prop: 'pixelateRegion',
      type: 'bool/string',
      default: '-',
      example: () => (<span><code>true</code>, <code>35,h_425,w_550,x_600,y_400</code></span>)
    },
    {
      prop: 'redeye',
      type: 'bool/string',
      default: '-',
      example: () => (<code>true</code>)
    },
    {
      prop: 'replaceColor',
      type: 'string',
      default: '-',
      example: () => (<span><code>saddlebrown</code>, <code>2F4F4F:20</code>, <code>silver:55:89b8ed</code></span>)
    },
    {
      prop: 'sanitize',
      type: 'bool',
      default: () => (<span><code>true</code> if .svg</span>),
      example: () => (<span><code>true</code> - Only applies to .svg</span>),
    },
    {
      prop: 'saturation',
      type: 'bool/string',
      default: '-',
      example: () => (<span><code>true</code>, <code>70</code></span>)
    },
    {
      prop: 'screen',
      type: 'bool',
      default: '-',
      example: () => (<code>true</code>)
    },
    {
      prop: 'sepia',
      type: 'bool/string',
      default: '-',
      example: () => (<span><code>true</code>, <code>50</code></span>)
    },
    {
      prop: 'shadow',
      type: 'bool/string',
      default: '-',
      example: () => (<span><code>true</code>, <code>50,x_-15,y_15</code></span>)
    },
    {
      prop: 'sharpen',
      type: 'bool/string',
      default: '-',
      example: () => (<span><code>true</code>, <code>100</code></span>)
    },
    {
      prop: 'shear',
      type: 'string',
      default: '-',
      example: () => (<code>20.0:0.0</code>)
    },
    {
      prop: 'simulateColorblind',
      type: 'bool/string',
      default: '-',
      example: () => (<code>deuteranopia</code>)
    },
    {
      prop: 'trim',
      type: 'bool/string',
      default: '-',
      example: () => (<span><code>true</code>, <code>50:yellow</code></span>)
    },
    {
      prop: 'tint',
      type: 'bool/string',
      default: '-',
      example: () => (<span><code>true</code>, <code>100:red:blue:yellow</code></span>)
    },
    {
      prop: 'unsharpMask',
      type: 'bool/string',
      default: '-',
      example: () => (<span><code>true</code>, <code>500</code></span>)
    },
    {
      prop: 'vectorize',
      type: 'bool/string',
      default: '-',
      example: () => (<span><code>true</code>, <code>3:0.5</code></span>)
    },
    {
      prop: 'vibrance',
      type: 'bool/string',
      default: '-',
      example: () => (<span><code>true</code>, <code>70</code></span>)
    },
    {
      prop: 'vignette',
      type: 'bool/string',
      default: '-',
      example: () => (<span><code>true</code>, <code>30</code></span>)
    }
  ]}
/>

[View the Cloudinary docs](https://cloudinary.com/documentation/transformation_reference#e_effect) to see learn more about using effects.

### Overlays & Underlays

Cloudinary gives you the ability to add layers above or below your primary asset using Overlays and Underlays.

<Table
  columns={[
    {
      id: 'prop',
      title: 'Prop'
    },
    {
      id: 'type',
      title: 'Type'
    },
    {
      id: 'example',
      title: 'Example'
    },
  ]}
  data={[
    {
      prop: 'overlay',
      type: 'bool',
      default: '-',
      example: () => (<code>true</code>)
    },
    {
      prop: 'overlays',
      type: 'array',
      default: '-',
      example: () => (<a href="#customizing-overlays--underlays">Customizing Overlays & Underlays</a>)
    },
    {
      prop: 'text',
      type: 'string',
      default: '-',
      example: () => (<code>Next Cloudinary</code>)
    },
    {
      prop: 'underlay',
      type: 'string',
      default: '-',
      example: () => (<code>my-public-id</code>)
    },
    {
      prop: 'underlays',
      type: 'array',
      default: '-',
      example: () => (<a href="#customizing-overlays--underlays">Customizing Overlays & Underlays</a>)
    },
  ]}
/>

#### Customizing Overlays & Underlays

> Note: The API for Underlays is similar to Overlays except they do not support text.

<Table
  columns={[
    {
      id: 'prop',
      title: 'Prop'
    },
    {
      id: 'type',
      title: 'Type'
    },
    {
      id: 'example',
      title: 'Example'
    },
  ]}
  data={[
    {
      prop: 'appliedEffects',
      type: 'array',
      example: 'Same as effects, added as applied transformation'
    },
    {
      prop: 'effects',
      type: 'array',
      example: () => (<a href="#layer-effect-props">effects</a>)
    },
    {
      prop: 'position',
      type: 'object',
      example: () => (<a href="#layer-position-props">position</a>)
    },
    {
      prop: 'publicId',
      type: 'string',
      example: () => (<code>thumb</code>)
    },
    {
      prop: 'text',
      type: 'object|string',
      example: () => (<span><code>Next Cloudinary</code> or See <a href="#layer-text-props">text</a> Below</span>)
    },
    {
      prop: 'url',
      type: 'string',
      example: () => (<code>https://.../image.jpg</code>)
    },
  ]}
/>

<div className="-mb-4">
  <strong id="layer-effect-props" className="block text-slate-500 text-lg mt-8 -mb-4">
    <code>effects</code>
  </strong>
  
  Objects in the `effects` array can include everything in [Transformation & Effect Props](#transformation--effect-props) above as well as:
</div>

<Table
  columns={[
    {
      id: 'prop',
      title: 'Prop'
    },
    {
      id: 'type',
      title: 'Type'
    },
    {
      id: 'example',
      title: 'Example'
    },
  ]}
  data={[
    {
      prop: 'aspectRatio',
      type: 'string',
      example: () => (<code>3.0</code>)
    },

    {
      prop: 'crop',
      type: 'string',
      example: () => (<code>10</code>)
    },

    {
      prop: 'gravity',
      type: 'string',
      example: () => (<code>north_west</code>)
    },

    {
      prop: 'height',
      type: 'number',
      example: () => (<code>600</code>)
    },

    {
      prop: 'width',
      type: 'number',
      example: () => (<code>600</code>)
    },
  ]}
/>

<div className="-mb-4">
  <strong id="layer-position-props" className="block text-slate-500 text-lg mt-8 -mb-4">
    <code>position</code>
  </strong>

  The `position` property can include:
</div>

<Table
  columns={[
    {
      id: 'prop',
      title: 'Prop'
    },
    {
      id: 'type',
      title: 'Type'
    },
    {
      id: 'example',
      title: 'Example'
    },
  ]}
  data={[
    {
      prop: 'angle',
      type: 'number',
      example: () => (<code>45</code>)
    },
    {
      prop: 'gravity',
      type: 'string',
      example: () => (<code>north_west</code>)
    },
    {
      prop: 'x',
      type: 'number',
      example: () => (<code>10</code>)
    },
    {
      prop: 'y',
      type: 'number',
      example: () => (<code>10</code>)
    },
  ]}
/>

<div className="-mb-4">
  <strong id="layer-text-props" className="block text-slate-500 text-lg mt-8 -mb-4">text</strong>

  The `text` property can include:
</div>

<Table
  columns={[
    {
      id: 'prop',
      title: 'Prop'
    },
    {
      id: 'type',
      title: 'Type'
    },
    {
      id: 'example',
      title: 'Example'
    },
  ]}
  data={[
    {
      prop: 'border',
      type: 'string',
      example: () => (<code>20px_solid_blue</code>)
    },
    {
      prop: 'color',
      type: 'string',
      example: () => (<code>blueviolet</code>)
    },
    {
      prop: 'fontFamily',
      type: 'string',
      example: () => (<code>Open Sans</code>)
    },
    {
      prop: 'fontSize',
      type: 'number',
      example: () => (<code>48</code>)
    },
    {
      prop: 'fontWeight',
      type: 'string',
      example: () => (<code>bold</code>)
    },
    {
      prop: 'letterSpacing',
      type: 'number',
      example: () => (<code>14</code>)
    },
    {
      prop: 'lineSpacing',
      type: 'number',
      example: () => (<code>14</code>)
    },
    {
      prop: 'stroke',
      type: 'bool',
      example: () => (<span><code>true</code> in coordination with Border</span>)
    },
    {
      prop: 'textDecoration',
      type: 'string',
      example: () => (<code>underline</code>)
    },
  ]}
/>


### Managing Transformations & Effects

Most transformations and effects are exposed as top-level props to enable you to easily
apply what you need, but you can also use the following props for more advanced and
organized ways of applying transformations and effects.

<Table
  columns={[
    {
      id: 'prop',
      title: 'Prop'
    },
    {
      id: 'type',
      title: 'Type'
    },
    {
      id: 'default',
      title: 'Default'
    },
    {
      id: 'example',
      title: 'Example'
    },
  ]}
  data={[
    {
      prop: 'effects',
      type: 'array',
      default: '-',
      example: () => (<code>{`[{ background: 'blue' }]`}</code>)
    },
    {
      prop: 'preserveTransformations',
      type: 'string',
      default: () => (<code>false</code>),
      example: () => (<code>true</code>)
    },
    {
      prop: 'rawTransformations',
      type: 'array',
      default: '-',
      example: () => (<code>{`['e_blur:2000']`}</code>)
    },
    {
      prop: 'strictTransformations',
      type: 'boolean',
      default: '-',
      example: () => (<a href="#strict-transformations">Strict Transformations</a>)
    },
    {
      prop: 'transformations',
      type: 'string/array',
      default: '-',
      example: () => (<code>{`['my-named-transformation']`}</code>)
    },
  ]}
/>

#### Strict Transformations

[Strict Transformations](https://cloudinary.com/documentation/control_access_to_media#strict_transformations) gives
you the ability to have more control over what transformations are permitted to be used from your Cloudinary account.

You can opt into Strict Transformations with the `strictTransformations` prop which will prevent all options from being
applied to the delivery URL except for named transformations, for instance:

```jsx
<CldImage
  width="800"
  height="600"
  src="public-id"
  strictTransformations
  transformations=["my-transformation"]
  alt=""
/>
```

Will result in a URL of:

```
https://res.cloudinary.com/cloudname/image/upload/t_my-transformation/public-id
```

>  Note: the width and height are not applied to the URL, but are still included on the image tag rendered to the DOM.

## Advanced

### Configuration & Delivery

<Table
  columns={[
    {
      id: 'prop',
      title: 'Prop'
    },
    {
      id: 'type',
      title: 'Type'
    },
    {
      id: 'default',
      title: 'Default'
    },
    {
      id: 'example',
      title: 'Example'
    },
  ]}
  data={[
    {
      prop: 'config',
      type: 'object',
      default: '-',
      example: () => (<code>{`{ url: { secureDistribution: 'spacejelly.dev' } }`}</code>)
    },
    {
      prop: 'deliveryType',
      type: 'string',
      default: () => (<code>upload</code>),
      example: () => (<code>fetch</code>)
    },
    {
      prop: 'seoSuffix',
      type: 'string',
      default: '-',
      example: () => (<code>my-image-content</code>)
    },
    {
      prop: 'version',
      type: 'number',
      default: '-',
      example: () => (<code>1234</code>)
    },
  ]}
/>

### Events & Refs

<Table
  columns={[
    {
      id: 'prop',
      title: 'Prop'
    },
    {
      id: 'type',
      title: 'Type'
    },
    {
      id: 'example',
      title: 'Example'
    },
  ]}
  data={[
    {
      prop: 'onError',
      type: 'function/bool',
      example: () => (<code>{`(event) => {}`}</code>)
    },
    {
      prop: 'ref',
      type: 'ref',
      default: '-',
      example: 'Ref'
    },
  ]}
/>


### Optimization

By default, CldImage opts in any image to `f_auto` and `q_auto` which provide automatic
optimization through intelligent compression and by automatically delivering the most
efficient format based on the browser and device requesting the image.

You can customize and manage these properties using the options below:

<Table
  columns={[
    {
      id: 'prop',
      title: 'Prop'
    },
    {
      id: 'type',
      title: 'Type'
    },
    {
      id: 'default',
      title: 'Default'
    },
    {
      id: 'example',
      title: 'Example'
    },
  ]}
  data={[
    {
      prop: 'dpr',
      type: 'number/string',
      default: '-',
      example: () => (<code>2.0</code>)
    },
    {
      prop: 'format',
      type: 'string',
      default: () => (<code>auto</code>),
      example: () => (<code>webp</code>)
    },
    {
      prop: 'quality',
      type: 'string',
      default: () => (<code>auto</code>),
      example: () => (<code>90</code>)
    },
    {
      prop: 'unoptimized',
      type: 'boolean',
      default: '-',
      example: () => (<a href="#unoptimized-images">Unoptimized Images</a>)
    },
  ]}
/>

#### Unoptimized Images

The Next.js Image component provides the ability to pass in an [unoptimized](https://nextjs.org/docs/pages/api-reference/components/image#unoptimized)
flag as a way to deliver the raw image URL without any quality, format, or size changes. When using
this or the global option, the CldImage component performs the same treatment by not adding the
f_auto or q_auto parameters as well as not subjecting the image to any resizing.